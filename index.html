<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#000000" />
    <title>Для Тебя</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --blood: #8b0000;
            --blood-d: #600000;
            --ink: #300000;
            --ink2: #400000;
            --game-bg: #0a0a0a;
        }

        body {
            font-family: 'Times New Roman', serif;
            color: var(--blood);
            min-height: 100vh;
            background: #000;
            overflow-x: hidden;
        }

        /* когда финальная сцена открыта — блокируем скролл фона */
        body.modal-open {
            overflow: hidden;
        }

        /* Фон */
        .site-background {
            position: fixed;
            inset: 0;
            z-index: -2;
            background: url('gif3.gif') center/cover no-repeat;
            opacity: .9;
        }

        .site-overlay {
            position: absolute;
            inset: 0;
            background:
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(139, 0, 0, 0.02) 2px, rgba(139, 0, 0, 0.02) 4px),
                radial-gradient(ellipse at center, transparent 0%, rgba(0, 0, 0, 0.5) 100%);
            z-index: -1;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        /* Шапка */
        .header {
            text-align: center;
            margin-bottom: 22px;
            padding: 20px;
            border-bottom: 1px solid var(--blood-d);
        }

        .main-title {
            font-size: 2.6em;
            font-weight: 300;
            color: #800000;
            letter-spacing: 3px;
            font-variant: small-caps;
            text-shadow: 0 0 10px rgba(139, 0, 0, 0.25);
            position: relative;
        }

        .main-title::before,
        .main-title::after {
            content: '†';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            color: #600000;
            font-size: 1.6em;
        }

        .main-title::before {
            left: -36px;
        }

        .main-title::after {
            right: -36px;
        }

        .subtitle {
            font-size: .9em;
            color: var(--blood);
            letter-spacing: 8px;
            margin-top: 8px;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(139, 0, 0, .35);
        }

        /* Плеер */
        .player-card {
            background:
                url('gifka.gif') center/cover no-repeat,
                radial-gradient(circle at 30% 30%, rgba(139, 0, 0, 0.05) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #000 100%);
            border: 1px solid var(--ink);
            padding: 24px;
            margin: 22px 0 18px;
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.1), inset 0 0 50px rgba(139, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            min-height: 620px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            opacity: 0;
            transform: translateY(10px);
            transition: all 1.2s ease;
        }

        .player-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .player-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, .3);
            z-index: 1;
        }

        .player-card>* {
            position: relative;
            z-index: 3;
        }

        .player-content {
            margin-bottom: 18px;
        }

        .progress-container {
            margin: 16px 0;
            cursor: pointer;
            user-select: none;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--ink);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #400000, var(--blood), #400000);
            border-radius: 3px;
            transition: width .1s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: -4px;
            right: 0;
            width: 12px;
            height: 12px;
            background: var(--blood);
            transform: rotate(45deg);
            box-shadow: 0 0 8px rgba(139, 0, 0, .5);
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: .75em;
            color: var(--ink2);
            letter-spacing: 1px;
        }

        .controls {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin: 16px 0;
            align-items: center;
        }

        .control-btn {
            width: 48px;
            height: 48px;
            background: transparent;
            border: 1px solid var(--ink2);
            cursor: pointer;
            position: relative;
            transition: .3s;
        }

        .control-btn:hover {
            background: rgba(139, 0, 0, .1);
            border-color: var(--blood);
        }

        .play::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-40%, -50%);
            border-left: 14px solid var(--blood);
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
        }

        .pause::before,
        .pause::after {
            content: '';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 5px;
            height: 18px;
            background: var(--blood);
        }

        .pause::before {
            left: 16px;
        }

        .pause::after {
            left: 26px;
        }

        .restart::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 18px;
            height: 18px;
            border: 1px solid var(--blood);
            transform: translate(-50%, -50%) rotate(-45deg);
        }

        .restart::after {
            content: '';
            position: absolute;
            top: 10px;
            left: 50%;
            width: 6px;
            height: 6px;
            border-top: 1px solid var(--blood);
            border-right: 1px solid var(--blood);
            transform: translateX(-50%) rotate(45deg);
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }

        .volume-icon {
            width: 22px;
            height: 22px;
            border: 1px solid var(--ink2);
            position: relative;
            cursor: pointer;
        }

        .volume-icon::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            width: 3px;
            height: 18px;
            background: var(--blood);
        }

        .volume-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            width: 3px;
            height: 18px;
            background: var(--blood);
        }

        .volume-icon.low::after {
            height: 12px;
        }

        .volume-icon.high::after {
            height: 18px;
        }

        .volume-icon.muted::before,
        .volume-icon.muted::after {
            display: none;
        }

        .volume-slider-container {
            flex: 1;
            max-width: 120px;
        }

        .volume-slider {
            width: 100%;
            height: 4px;
            background: var(--ink);
            border-radius: 2px;
            -webkit-appearance: none;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: var(--blood);
            border: 3px solid var(--blood-d);
            border-radius: 50%;
            box-shadow: 0 0 6px rgba(139, 0, 0, .4);
        }

        /* Лирика */
        .lyrics-container {
            background: rgba(10, 0, 0, 0.78);
            border-radius: 0;
            padding: 20px;
            margin: 10px 0 0;
            min-height: 160px;
            border: 1px solid var(--ink);
            position: relative;
        }

        .current-line {
            text-align: center;
            font-size: 0.8em;
            color: var(--ink2);
            margin-bottom: 10px;
            letter-spacing: 2px;
        }

        .lyrics-text {
            font-size: 1.1em;
            line-height: 1.6;
            text-align: center;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 300;
            letter-spacing: 1px;
            color: #600000;
        }

        .lyric-line {
            color: var(--blood);
            text-shadow: 0 0 5px rgba(139, 0, 0, 0.2);
            font-style: italic;
        }

        .typewriter-cursor {
            animation: flicker 1.5s infinite;
            color: var(--blood);
        }

        @keyframes flicker {

            0%,
            100% {
                opacity: .8
            }

            50% {
                opacity: .35
            }
        }

        /* Фото (полар) */
        .polaroids {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 18px;
            margin: 8px 0 18px;
        }

        .polaroids figure {
            position: relative;
            background: #111;
            border: 1px solid var(--ink);
            padding: 10px;
            box-shadow: 0 12px 20px rgba(0, 0, 0, .35);
            transform: rotate(-1.2deg);
            transition: transform .3s, filter .3s;
            filter: grayscale(100%) contrast(1.05);
            overflow: hidden;
            cursor: pointer;
        }

        .polaroids figure:nth-child(2) {
            transform: rotate(1.2deg)
        }

        .polaroids figure:nth-child(3) {
            transform: rotate(-.6deg)
        }

        .polaroids img {
            display: block;
            width: 100%;
            aspect-ratio: 4/5;
            object-fit: cover;
            background: #000;
            transition: all .3s;
        }

        .polaroids figcaption {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.4rem;
            font-weight: bold;
            letter-spacing: 3px;
            color: rgba(255, 255, 255, 0);
            background: rgba(0, 0, 0, 0);
            transition: all .3s;
            text-transform: uppercase;
        }

        .polaroids figure:hover {
            transform: translateY(-6px) rotate(0deg);
            filter: grayscale(70%);
        }

        .polaroids figure:hover img {
            filter: brightness(50%) grayscale(70%);
        }

        .polaroids figure:hover figcaption {
            color: #fff;
            background: rgba(0, 0, 0, .3);
        }

        /* Мини-игра */
        .games {
            margin: 22px 0;
            border: 1px solid var(--ink);
            background: linear-gradient(180deg, #0b0b0b, #000);
            box-shadow: 0 10px 30px rgba(0, 0, 0, .35), inset 0 0 40px rgba(0, 0, 0, .35);
        }

        .games-head {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
            padding: 12px 14px;
            color: #a30000;
            letter-spacing: 2px;
            border-bottom: 1px solid var(--ink);
        }

        .games-controls {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .gbtn {
            border: 1px solid var(--blood-d);
            background: #130000;
            color: #c00000;
            padding: 6px 10px;
            cursor: pointer;
            letter-spacing: 1px;
            transition: .2s;
            font-family: inherit;
        }

        .gbtn:hover {
            background: #1e0000;
            border-color: #7a0000;
            color: #ff3b3b;
        }

        .game-canvas-wrap {
            position: relative;
            overflow: hidden;
        }

        canvas#gameCanvas {
            width: 100%;
            height: auto;
            display: block;
            background: var(--game-bg);
            /* мобилки: отключаем скролл-жесты поверх канваса */
            touch-action: none;
        }

        .game-msg {
            position: absolute;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            color: #fff;
            text-shadow: 0 0 14px rgba(255, 0, 0, .35);
            font-size: 1.4rem;
            letter-spacing: 2px;
            text-align: center;
            background: rgba(0, 0, 0, .50);
            z-index: 9;
        }

        .game-msg.show {
            display: flex;
        }

        /* Финальная сцена — фуллскрин оверлей с плавным зумом */
        .final-scene {
            position: fixed;
            inset: 0;
            padding: 24px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(3px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 400ms ease;
            z-index: 999;
        }

        .final-scene.show {
            opacity: 1;
            pointer-events: auto;
        }

        .final-text {
            color: #a30000;
            font-size: 1.4em;
            margin-bottom: 12px;
            text-shadow: 0 0 12px rgba(163, 0, 0, .6);
            letter-spacing: 2px;
        }

        .final-img {
            max-width: 95vw;
            max-height: 88vh;
            width: auto;
            height: auto;
            object-fit: contain;
            border: 2px solid #400000;
            border-radius: 10px;
            box-shadow: 0 0 35px rgba(163, 0, 0, .6);
            transform: scale(0.92);
            opacity: 0;
            transition: transform 700ms cubic-bezier(.16, .84, .44, 1), opacity 700ms ease;
        }

        .final-scene.show .final-img {
            transform: scale(1);
            opacity: 1;
        }

        .final-close {
            position: absolute;
            top: 14px;
            right: 14px;
            width: 40px;
            height: 40px;
            border: 1px solid #600000;
            background: rgba(0, 0, 0, .55);
            color: #c00000;
            font-size: 24px;
            line-height: 1;
            border-radius: 8px;
            cursor: pointer;
            transition: .2s;
        }

        .final-close:hover {
            background: rgba(0, 0, 0, .7);
            border-color: #8b0000;
            color: #ff3b3b;
        }

        .footer {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            text-align: center;
            margin: 28px auto 0;
            color: #700000;
            font-size: .75em;
            letter-spacing: 3px;
            border-top: 1px solid var(--blood-d);
            padding-top: 18px;
            text-shadow: 0 0 5px rgba(139, 0, 0, .3);
        }

        /* --- МОБИЛЬНЫЕ ПРАВКИ, чтобы игра влезала --- */
        @media (max-width: 560px) {
            .container {
                padding: 18px 12px;
            }

            .games-head {
                flex-direction: column;
                align-items: flex-start;
                gap: 6px;
            }

            .games-controls {
                flex-wrap: wrap;
                gap: 6px;
            }

            .gbtn {
                padding: 5px 9px;
                font-size: 14px;
            }

            canvas#gameCanvas {
                max-height: 220px;
                min-height: 140px;
            }

            .game-msg {
                font-size: 1.1rem;
                padding: 10px;
            }

            .polaroids {
                grid-template-columns: 1fr;
            }

            .subtitle {
                letter-spacing: 5px;
            }
        }
    </style>
</head>

<body>
    <div class="site-background">
        <div class="site-overlay"></div>
    </div>

    <div class="container">
        <div class="header">
            <h1 class="main-title">Для Тебя</h1>
            <p class="subtitle">навсегда в тишине</p>
        </div>

        <!-- Плеер -->
        <div class="player-card" id="playerCard">
            <audio id="music" preload="metadata">
                <source src="song.mp3" type="audio/mpeg">
                Ваш браузер не поддерживает аудио элементы.
            </audio>

            <div class="player-content">
                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="time-display"><span id="currentTime">0:00</span><span id="totalTime">0:00</span></div>
                </div>
            </div>

            <div class="controls">
                <button id="playPauseBtn" class="control-btn play" aria-label="Воспроизвести/Пауза"></button>
                <button id="restartBtn" class="control-btn restart" aria-label="С начала"></button>
            </div>

            <div class="volume-control" role="group" aria-label="Громкость">
                <div class="volume-icon high" id="volumeToggle" role="button" tabindex="0" aria-label="Звук вкл/выкл">
                </div>
                <div class="volume-slider-container">
                    <input type="range" min="0" max="100" value="50" class="volume-slider" id="volumeSlider"
                        aria-label="Ползунок громкости">
                </div>
            </div>

            <div class="lyrics-container">
                <div class="current-line" id="currentLine" aria-live="polite">- / -</div>
                <div class="lyrics-text" id="lyricsText" aria-live="polite">Нажмите кнопку для начала музыки...</div>
            </div>
        </div>

        <!-- Фото -->
        <section class="polaroids">
            <figure><img src="img1.jpg" alt="ТЫ" loading="lazy">
                <figcaption>ТЫ</figcaption>
            </figure>
            <figure><img src="img2.jpg" alt="ТОЛЬКО" loading="lazy">
                <figcaption>ТОЛЬКО</figcaption>
            </figure>
            <figure><img src="img3.jpg" alt="МОЯ" loading="lazy">
                <figcaption>МОЯ</figcaption>
            </figure>
        </section>

        <!-- Мини-игра -->
        <section class="games" id="games">
            <div class="games-head">
                <div>Мини-игра — «Прыжок к Танаису»</div>
                <div class="games-controls">
                    <span style="opacity:.85;">Управление: <b>ЛКМ / тап</b> — прыжок</span>
                    <button class="gbtn" id="gameStart">Начать</button>
                    <button class="gbtn" id="gameReset">Сброс</button>
                </div>
            </div>
            <div class="game-canvas-wrap">
                <canvas id="gameCanvas" width="900" height="260"
                    aria-label="Мини-игра: перепрыгивайте препятствия, чтобы добраться до Танаиса. Управление: клик, тап или пробел."></canvas>
                <div class="game-msg" id="gameMsg"></div>

                <!-- Финальная сцена (оверлей фуллскрин) -->
                <div id="finalScene" class="final-scene" aria-modal="true" role="dialog">
                    <button class="final-close" aria-label="Закрыть (Esc)">×</button>
                    <div class="final-text">вы добрались до Танаиса)</div>
                    <img src="kiss.png" alt="финальная сцена" class="final-img">
                </div>
            </div>
        </section>

        <div class="footer">© 2025 | Авангард</div>
    </div>

    <script src="script2.js"></script>
</body>

</html>
